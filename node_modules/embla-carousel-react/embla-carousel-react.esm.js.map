{"version":3,"file":"embla-carousel-react.esm.js","sources":["src/components/utils.ts","src/components/index.ts"],"sourcesContent":["import EmblaCarousel, { EmblaPluginType } from 'embla-carousel'\n\nexport function canUseDOM(): boolean {\n  return !!(\n    typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  )\n}\n\nexport function sortAndMapPluginToOptions(\n  plugins: EmblaPluginType[],\n): EmblaPluginType['options'][] {\n  return plugins\n    .concat()\n    .sort((a, b) => (a.name > b.name ? 1 : -1))\n    .map((plugin) => plugin.options)\n}\n\nexport function arePluginsEqual(\n  pluginsA: EmblaPluginType[],\n  pluginsB: EmblaPluginType[],\n): boolean {\n  if (pluginsA.length !== pluginsB.length) return false\n\n  const { areEqual } = EmblaCarousel.optionsHandler()\n  const optionsA = sortAndMapPluginToOptions(pluginsA)\n  const optionsB = sortAndMapPluginToOptions(pluginsB)\n\n  return optionsA.every((optionA, index) => {\n    const optionB = optionsB[index]\n    return areEqual(optionA, optionB)\n  })\n}\n","import { useRef, useEffect, useState, useCallback } from 'react'\nimport { arePluginsEqual, canUseDOM } from './utils'\nimport EmblaCarousel, {\n  EmblaCarouselType,\n  EmblaOptionsType,\n  EmblaPluginType,\n} from 'embla-carousel'\n\ntype EmblaViewportRefType = <ViewportElement extends HTMLElement>(\n  instance: ViewportElement | null,\n) => void\n\nexport type UseEmblaCarouselType = [\n  EmblaViewportRefType,\n  EmblaCarouselType | undefined,\n]\n\nfunction useEmblaCarousel(\n  options: EmblaOptionsType = {},\n  plugins: EmblaPluginType[] = [],\n): UseEmblaCarouselType {\n  const optionsHandler = useRef(EmblaCarousel.optionsHandler())\n  const storedOptions = useRef(options)\n  const storedPlugins = useRef(plugins)\n  const [embla, setEmbla] = useState<EmblaCarouselType>()\n  const [viewport, setViewport] = useState<HTMLElement>()\n\n  const reInit = useCallback(() => {\n    if (embla) embla.reInit(storedOptions.current, storedPlugins.current)\n  }, [embla])\n\n  useEffect(() => {\n    if (canUseDOM() && viewport) {\n      EmblaCarousel.globalOptions = useEmblaCarousel.globalOptions\n      const newEmbla = EmblaCarousel(\n        viewport,\n        storedOptions.current,\n        storedPlugins.current,\n      )\n      setEmbla(newEmbla)\n      return () => newEmbla.destroy()\n    } else {\n      setEmbla(undefined)\n    }\n  }, [viewport, setEmbla])\n\n  useEffect(() => {\n    if (optionsHandler.current.areEqual(storedOptions.current, options)) return\n\n    storedOptions.current = options\n    reInit()\n  }, [options, reInit])\n\n  useEffect(() => {\n    if (arePluginsEqual(storedPlugins.current, plugins)) return\n\n    storedPlugins.current = plugins\n    reInit()\n  }, [plugins, reInit])\n\n  return [<EmblaViewportRefType>setViewport, embla]\n}\n\nuseEmblaCarousel.globalOptions = <EmblaOptionsType | undefined>undefined\n\nexport default useEmblaCarousel\n"],"names":["canUseDOM","window","document","createElement","sortAndMapPluginToOptions","plugins","concat","sort","a","b","name","map","plugin","options","arePluginsEqual","pluginsA","pluginsB","length","areEqual","EmblaCarousel","optionsHandler","optionsA","optionsB","every","optionA","index","optionB","useEmblaCarousel","useRef","storedOptions","storedPlugins","_a","useState","embla","setEmbla","_b","viewport","setViewport","reInit","useCallback","current","useEffect","globalOptions","newEmbla_1","destroy","undefined"],"mappings":"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"}